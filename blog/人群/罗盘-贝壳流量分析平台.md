# 1.背景

随着贝壳的不断发展，特别是今年年初专门成立了增长线，数据化思维和精细化运营的诉求越来越强烈。各个业务方急需了解自己系统的流量情况，从数据出发优化自己的产品，从而留住用户提高转化；而作为公司高层需要知道集团的整体流量情况，特别是比较核心的月活、商机转化、用户留存和渠道推广等情况，及时作出战略部署和调整，保证公司保持高效稳定的增长。在这样的大背景下我们搭建了一套流量分析平台-罗盘，为集团和各个业务方提供统一、权威的流量数据出口。

# 2.面临的问题

1.日志埋点格式不统一，历史存在多套埋点标准，有些业务方还有自己的日志埋点规范，如何统一标准，兼容历史数据是我们面临的第一个问题；

2.统计口径不一致，每个业务都有自己的统计口径，数据互相不认可，而从集团层面很难拿到整体的流量数据；

3.每天TB级别上报数据，各种复杂的数据分析场景，在很多场景下需要保存明细数据才能分析，如何存储明细数据和分析数据是系统架构设计的一大挑战。

# 3.总体设计方案

